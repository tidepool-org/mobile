env:
  global:
    - secure: 0YNWM5/PqK2AAwANlfRbm8iTRZgMgcofnvo3/nkpRMIctmTzCtiLDxiz3UDnddtCsqapaUtBhrdk8VwicWVpNMqJNqScKEmOP/eN2YHfxQ/FyGnr/arqpwXnmgXGJ1GkXeJnV2EyBnBAwEzQ5Zc95TTZhb3wszj140HryqNqfNom8TUtAPSzrdgr2/adXYo861/20y3fcmhTT1j/Tw/JHZbj6EE9tpsRuS5TG4UMHA/DNGgPCj4bDZjXXjDTX8AXs8sY65XWTsV9BXZV5AUr/v3IYW30fCVGNVZU1nbiMWfEYWRJPoSMbFqXsrIDK/KOXk//+EI4zVbgHhE5IsRW5uv7ybBgqlDbd+OU8xABrzq032nAs/9AvrEATJJGecddgC5JM7T1F9uxgsC0uxEVZXvSPL870nMOPo+NYkcRyTqAKciyo/NjtfM78W4FHyflC8eCme+QIUp9VXQpT7Fdk5f1c057IMiL6E/tI2+0FNTTNs/m5avbYfiDBrRFH9Mf+FHry2wSr7W0QhG1zpCs6/7tQpn+kRyOjGY4DdA2nCHn/L5lDHBD2YuEFKRyOSCMCbYVy7S5VjQtAyvxtLO9vCeE1Aj9WM3I0GDrN6sPcWPUwFfZA6tp1r4kOuQIE4AvD44avzzm/NibNIo5pZRoScsyxPdNxiBOkbOz9PXTq80=
    - secure: WeqzpIp1T5hj0d/VK95RL0+w7JvUDc+WB8iEfRv/ROSLv+Jb9j7a+tLN3539AUY+EXpjuwwNI/kzZf6ZVAYwQDuKc/o/5jEISsV2VTcBt7Wt03DOJsWKA7roLcsMbxgs2jZlBF8+HZrb+rxirb+g6Ngdlo6GSlLZy6UDJejzLEPlxM9K5eDhx8SeQ9tTqwVnI6J/HUYpbohlHvc/NJvTuCx8Ei2hx+ELoNukQOxTr2Q3O8jAnsVe0Dl2bTo4NmkuaH/uE5exPYcMdDpsZrG27eLD0mYV4fdWMJlzYX8gC2lZC3HqUKUGiVJ5y0tgu2+xRQil1JanxtAnYhk0GDcge5qqeL2fUy3LMIJMVJ45i1JqrF/QGvwi22pmdq7cWdr+Byo9H5E+gm8GkB3MAjyk13ehrXSLY5Mv7JJi0jCnb1SNlGcMwu1DbIHMD3PnJL135qBtX+1aM1NWzlPTZiXJy0MA2O0KBbRVr9CCqFH7gyx4xBZP68auF6TeTyleuoh+yMcPu3MDQLCGdPPqcp2bFukf1QrJaoKYmd57XXFAYwh3NyMqr179RN84PYViUkZwHdO4XmQABB6Uo7Yczo0rbKUOBf9rRBf7oejRBNgMYpTvIOi+TftfXn+oI3g8ztX4kKlVx7H5Rc51eMTIVJAhdsORbpeYVrkagufEzqcJwuA=
    - secure: sVlgYOjB0ClCZLjTQxh4Hb3ajGDDqACsc6T4F1HEFg1TRrZuW9nwWgnkZmLjX1+V2EXOkVb4HglJfamI5WmYoJ1BC/fcU2j2+TgfF9HmPL4UbVCp5Dgx0FAs4+t80eakItpPPSHN//45S0Kzc4WVzy9P63t3H9b5855St9lOdFY5PrA+b4TyBkR+X/dtaCuKtMTJiGCC5JTef2EHVniHmkftk49jAEx4Uu3I8ZXpj/wXSn2PIZ22PkA9Ig+luA9F5dJ6QLPGphVmbHnoaZv/64ArrrOstr/g1fphROzTfFGihdS7+Jilol+APMmukAWuWeAnfxehcliPEx/VVMjBEb4bE38nuNbgK+KB0G51PT5zDIylA2c2rK9mmud1Hk4SmCQuQE/kND4e61JPHyPwlWZOEuk42SrCjZ8N7n0TXkT32RcWScQ7ccTe+J8ZeFHoxiCLFovwwMIXKOkdDmi0HoI1K8zwPZzCETF+j7F3bJRZOTTkXBD0lwc/6mGaHqwrAxHw5UuPXkhh4+5rD4veXWuLY8Gh50jBPSSbT6at5g8pDFh8gdSyFo630dZ1bta7PT5rS7/GQqZNB4JL65JTab5D4nGWrRlozFU42i6sS9KKoN7xB3O5HFEbk2rFc7ZNNK97HilGf71M469cT2C79zJUC5rEIT6S/Wat6s0I3Wc=
    - secure: Qu3MD9YYG0QxMvvlV1xGHhLjhEvoafJZeP6iuZkVY0zwmn7WDHUwHXt1ntMRnMNGyTkb8yjWCkCY3NwosKkkYWZC5mM9Lhmee0oqe8Cia3JSteOSbdgPrSw38eZhaw1rsCXgYjK0Xx2dUPWOAsA+DfVN1/GOs08qy2lMRA4cKVk2C0MvvNSJhiBW9my23U3MJFOaMr3c+8kPi8UjAGJrHGyvIfE0m5Z9vTqfU1xJaJSruRlX1HkFqn0T5Ye73+QukznsmbcC3fMSiDqdybnf3tCzNjUqlCLnqFBb4Qk0LzaVUHzh57pIxuW60AtKS5FIOxoMNx51Y3XudUp0Wqok6jnt4cq+7LIGEekPfPWGmfzFjARe4dE4fWQ8GqNH11BR8pillYNAMWfbgkdTVTZAze3jAfD82NOH6s/DRTjc+rRq10BeZmDT+iHJKAp8ONRFxD7LsYgg2XcCW5Okpdkui7Oy/FOva3HmzQGnRi9XL9AzvzlV22mHUxvhewBtELUL7dGequMYHPB9FbT/ZuGcPYCc/UkOq7N/eYRhdhjaOjg8Ks4tR5nbKM+Aqo6ifZUf9W8V6GAOCKOC06Ws62LLpJjgUDT29jiI/DIhzdOBEZR1ZE77mUWRQ3xP+25DKowXJcwgFv4Oad4sODswd94wYZ85d3/v/RpOsPIoKHWL+iQ=
before_install:
  - echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf
  - sudo sysctl -p
  - echo $TRAVIS_BUILD_DIR
  - mv $TRAVIS_BUILD_DIR/ios/Tidepool $TRAVIS_BUILD_DIR/ios/tidepool
  - nvm install 10.15.0
  - npm install expo-cli --global
  - curl -o- -L https://yarnpkg.com/install.sh | bash
  - export PATH="$HOME/.yarn/bin:$PATH"
  - openssl aes-256-cbc -K $encrypted_4beaf9ef68f9_key -iv $encrypted_4beaf9ef68f9_iv
    -in release-keystore.jks.enc -out android/release-keystore.jks -d
  - expo login -u tidepool -p $EXPO_PASSWORD
install:
  - yarn install
  - yarn run pre
  - expo publish
matrix:
  include:
    - language: android
      jdk: oraclejdk8
      android:
        components:
          - build-tools-27.0.3
          - android-23
          - android-24
          - android-27
          - extra-google-google_play_services
          - extra-google-m2repository
          - extra-android-m2repository
        licenses:
          - android-sdk-preview-license-52d11cd2
          - android-sdk-license-.+
          - google-gdk-license-.+
      script:
        - pushd android
        - ./gradlew :app:assembleDevMinSdkDevKernelDebug
        - ./gradlew :app:assembleProdMinSdkProdKernelRelease
